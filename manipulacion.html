<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Productos + Tareas</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
      transition: background 0.3s;
    }

    /* Cards */
    .custom-card {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      border-radius: 15px;
      overflow: hidden;
      background-color: rgba(255,255,255,0.9);
    }
    .custom-card:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    }

    /* Botones */
    button.btn-primary { background-color: #28a745; border: none; }
    button.btn-primary:hover { background-color: #218838; }
    button.btn-danger { background-color: #dc3545; border: none; }
    button.btn-danger:hover { background-color: #c82333; }

    /* Carrito flotante */
    #carrito-float {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 220px;
      background-color: rgba(255,255,255,0.95);
      z-index: 1000;
      padding: 10px;
      border-radius: 10px;
    }

    /* Lista de tareas */
    .list-group-item { transition: transform 0.2s; }
    .list-group-item:hover { transform: scale(1.02); background-color: #ffe3c5; }
  </style>
</head>
<body>

<!-- Carrito flotante -->
<div id="carrito-float">
  <h5>🛒 Carrito</h5>
  <ul id="carrito-lista" class="list-group mb-2"></ul>
  <h6>Total: <span id="carrito-total">0</span> MXN</h6>
  <button id="finalizar-compra" class="btn btn-success btn-sm w-100">Finalizar compra</button>
</div>

<div class="container py-5">
  <h2 class="text-center mb-4">Galería de Productos</h2>
  <div class="row justify-content-center">

    <!-- Card 1 -->
    <div class="col-md-4">
      <div id="producto-card" class="card custom-card">
        <img src="gato_pja.jpeg" class="card-img-top" alt="Producto 1">
        <div class="card-body">
          <h5 class="card-title">Gato lol</h5>
          <p class="card-text">Precio: 150 MXN</p>
          <button class="btn btn-primary me-2">Seleccionar</button>
          <button class="btn btn-danger">Retirar</button>
        </div>
      </div>
    </div>

    <!-- Card 2 -->
    <div class="col-md-4 mb-4">
      <div id="producto2" class="card custom-card">
        <img src="chayanne.jpeg" class="card-img-top" alt="Producto 2">
        <div class="card-body">
          <h5 class="card-title">Peluche etsotiko</h5>
          <p class="card-text">Precio: 100 MXN</p>
          <button class="btn btn-primary me-2">Seleccionar</button>
          <button class="btn btn-danger">Retirar</button>
        </div>
      </div>
    </div>

    <!-- Card 3 -->
    <div class="col-md-4 mb-4">
      <div id="producto3" class="card custom-card">
        <img src="amongas.webp" class="card-img-top" alt="Producto 3">
        <div class="card-body">
          <h5 class="card-title">AmongAss</h5>
          <p class="card-text">Precio: 200 MXN</p>
          <button class="btn btn-primary me-2">Seleccionar</button>
          <button class="btn btn-danger">Retirar</button>
        </div>
      </div>
    </div>

  </div>

  <!-- Lista de Tareas -->
  <div class="mt-5">
    <h2 class="mb-3">📋 Lista de Tareas</h2>
    <ul id="lista-tareas" class="list-group mb-3">
      <li id="tarea1" class="list-group-item">Hacer la compra</li>
      <li id="tarea2" class="list-group-item">Lavar el coche</li>
      <li id="tarea3" class="list-group-item">Estudiar JavaScript</li>
    </ul>
    <button id="btn-eliminar" class="btn btn-danger mb-3">Eliminar primer tarea</button>
    <div class="input-group mb-3">
      <input type="text" id="input-tarea" class="form-control" placeholder="Nueva tarea">
      <button id="btn-agregar" class="btn btn-primary">Agregar tarea</button>
    </div>
  </div>

</div>

<script>
document.addEventListener('DOMContentLoaded', () => {

  // ======= CARRITO =======
  const productos = [
    {id: 'producto-card', nombre: 'Producto 1', precio: 150},
    {id: 'producto2', nombre: 'Producto 2', precio: 100},
    {id: 'producto3', nombre: 'Producto 3', precio: 200},
  ];

  const carrito = [];
  const carritoLista = document.getElementById('carrito-lista');
  const carritoTotal = document.getElementById('carrito-total');

  function actualizarCarrito() {
    carritoLista.innerHTML = '';
    let total = 0;
    carrito.forEach(item => {
      const li = document.createElement('li');
      li.className = 'list-group-item d-flex justify-content-between align-items-center';
      li.textContent = item.nombre;
      const span = document.createElement('span');
      span.textContent = `$${item.precio} MXN`;
      li.appendChild(span);
      carritoLista.appendChild(li);
      total += item.precio;
    });
    carritoTotal.textContent = total;
  }

  productos.forEach(prod => {
    const card = document.getElementById(prod.id);
    const btnSeleccionar = card.querySelector('button.btn-primary');
    const btnRetirar = card.querySelector('button.btn-danger');

    btnSeleccionar.addEventListener('click', () => {
      if (!carrito.find(p => p.id === prod.id)) {
        carrito.push(prod);
        card.classList.add('border', 'border-success', 'shadow');
        actualizarCarrito();
      }
    });

    btnRetirar.addEventListener('click', () => {
      const index = carrito.findIndex(p => p.id === prod.id);
      if (index !== -1) {
        carrito.splice(index, 1);
        card.classList.remove('border', 'border-success', 'shadow');
        actualizarCarrito();
      }
    });
  });

  document.getElementById('finalizar-compra').addEventListener('click', () => {
    if(carrito.length === 0){
      alert('No hay productos en el carrito 😅');
    } else {
      alert('Compra finalizada ✅ Total: ' + carritoTotal.textContent + ' MXN');
      carrito.splice(0, carrito.length);
      actualizarCarrito();
      productos.forEach(p => document.getElementById(p.id).classList.remove('border', 'border-success', 'shadow'));
    }
  });

  // ======= LISTA DE TAREAS =======
  const lista = document.getElementById('lista-tareas');
  const btnEliminar = document.getElementById('btn-eliminar');
  const btnAgregar = document.getElementById('btn-agregar');
  const inputTarea = document.getElementById('input-tarea');

  btnEliminar.addEventListener('click', () => {
    const primerTarea = lista.querySelector('li');
    if(primerTarea){
      primerTarea.remove();
    } else {
      alert('No hay más tareas para eliminar 😅');
    }
  });

  btnAgregar.addEventListener('click', () => {
    const valor = inputTarea.value.trim();
    if(valor){
      const li = document.createElement('li');
      li.className = 'list-group-item';
      li.textContent = valor;
      li.id = 'tarea-' + (lista.children.length + 1);
      lista.appendChild(li);
      inputTarea.value = '';
    } else {
      alert('Escribe algo para agregar 😎');
    }
  });

  // ======= FONDO DINÁMICO =======
  document.body.addEventListener('mousemove', e => {
    const x = e.clientX / window.innerWidth;
    const y = e.clientY / window.innerHeight;
    const hue = Math.round(x * 360);
    const light = Math.round(60 + y * 20);
    document.body.style.background = `hsl(${hue}, 70%, ${light}%)`;
  });

});
</script>

</body>
</html>
